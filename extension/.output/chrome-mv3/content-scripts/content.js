var content=(function(){"use strict";var ce=Object.defineProperty;var Ae=(y,h,w)=>h in y?ce(y,h,{enumerable:!0,configurable:!0,writable:!0,value:w}):y[h]=w;var p=(y,h,w)=>Ae(y,typeof h!="symbol"?h+"":h,w);function y(r){return r}function h(r){const e=document.querySelector("#prompt-textarea");return e?(e.focus(),document.execCommand("insertText",!1,r)||(e.textContent=r,e.dispatchEvent(new Event("input",{bubbles:!0}))),!0):!1}function w(r){const e=document.querySelector('[contenteditable="true"]');return e?(e.focus(),document.execCommand("insertText",!1,r)||(e.textContent=r,e.dispatchEvent(new Event("input",{bubbles:!0}))),!0):!1}function G(r){const e=document.querySelector(".ql-editor, [contenteditable='true']");return e?(e.focus(),document.execCommand("insertText",!1,r)||(e.textContent=r,e.dispatchEvent(new Event("input",{bubbles:!0}))),!0):!1}function V(){const r=window.location.hostname;return r.includes("chat.openai.com")||r.includes("chatgpt.com")?"chatgpt":r.includes("claude.ai")?"claude":r.includes("gemini.google.com")?"gemini":null}const z={chatgpt:h,claude:w,gemini:G};function H(){const r=document.createElement("div");r.id="contextgit-inject-host";const e=r.attachShadow({mode:"closed"}),s=document.createElement("style");s.textContent=`
    .cg-btn {
      position: fixed;
      bottom: 80px;
      right: 20px;
      z-index: 10000;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: #2563eb;
      color: white;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
      font-size: 14px;
      font-weight: bold;
      font-family: system-ui, sans-serif;
      transition: transform 0.2s;
    }
    .cg-btn:hover {
      transform: scale(1.1);
    }
  `,e.appendChild(s);const t=document.createElement("button");t.className="cg-btn",t.title="Open ContextGit",t.textContent="CG",t.addEventListener("click",()=>{chrome.runtime.sendMessage({type:"OPEN_SIDEPANEL"})}),e.appendChild(t),document.body.appendChild(r)}const Z={matches:["https://chat.openai.com/*","https://chatgpt.com/*","https://claude.ai/*","https://gemini.google.com/*"],main(){const r=V();r&&(H(),chrome.runtime.onMessage.addListener((e,s,t)=>{if(e.type==="INJECT_CONTEXT"){const l=z[r];if(!l(e.content))return navigator.clipboard.writeText(e.content).then(()=>t({success:!0,fallback:"clipboard"}),()=>t({success:!1,error:"Injection failed"})),!0;t({success:!0})}return!0}))}};function Y(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var C={exports:{}},J=C.exports,O;function X(){return O||(O=1,(function(r,e){(function(s,t){t(r)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:J,function(s){if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)s.exports=globalThis.browser;else{const t="The message port closed before a response was received.",l=m=>{const b={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(b).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class T extends WeakMap{constructor(i,o=void 0){super(o),this.createItem=i}get(i){return this.has(i)||this.set(i,this.createItem(i)),super.get(i)}}const ae=n=>n&&typeof n=="object"&&typeof n.then=="function",B=(n,i)=>(...o)=>{m.runtime.lastError?n.reject(new Error(m.runtime.lastError.message)):i.singleCallbackArg||o.length<=1&&i.singleCallbackArg!==!1?n.resolve(o[0]):n.resolve(o)},N=n=>n==1?"argument":"arguments",oe=(n,i)=>function(g,...A){if(A.length<i.minArgs)throw new Error(`Expected at least ${i.minArgs} ${N(i.minArgs)} for ${n}(), got ${A.length}`);if(A.length>i.maxArgs)throw new Error(`Expected at most ${i.maxArgs} ${N(i.maxArgs)} for ${n}(), got ${A.length}`);return new Promise((u,d)=>{if(i.fallbackToNoCallback)try{g[n](...A,B({resolve:u,reject:d},i))}catch(a){console.warn(`${n} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,a),g[n](...A),i.fallbackToNoCallback=!1,i.noCallback=!0,u()}else i.noCallback?(g[n](...A),u()):g[n](...A,B({resolve:u,reject:d},i))})},U=(n,i,o)=>new Proxy(i,{apply(g,A,u){return o.call(A,n,...u)}});let I=Function.call.bind(Object.prototype.hasOwnProperty);const F=(n,i={},o={})=>{let g=Object.create(null),A={has(d,a){return a in n||a in g},get(d,a,x){if(a in g)return g[a];if(!(a in n))return;let c=n[a];if(typeof c=="function")if(typeof i[a]=="function")c=U(n,n[a],i[a]);else if(I(o,a)){let v=oe(a,o[a]);c=U(n,n[a],v)}else c=c.bind(n);else if(typeof c=="object"&&c!==null&&(I(i,a)||I(o,a)))c=F(c,i[a],o[a]);else if(I(o,"*"))c=F(c,i[a],o["*"]);else return Object.defineProperty(g,a,{configurable:!0,enumerable:!0,get(){return n[a]},set(v){n[a]=v}}),c;return g[a]=c,c},set(d,a,x,c){return a in g?g[a]=x:n[a]=x,!0},defineProperty(d,a,x){return Reflect.defineProperty(g,a,x)},deleteProperty(d,a){return Reflect.deleteProperty(g,a)}},u=Object.create(n);return new Proxy(u,A)},R=n=>({addListener(i,o,...g){i.addListener(n.get(o),...g)},hasListener(i,o){return i.hasListener(n.get(o))},removeListener(i,o){i.removeListener(n.get(o))}}),ge=new T(n=>typeof n!="function"?n:function(o){const g=F(o,{},{getContent:{minArgs:0,maxArgs:0}});n(g)}),D=new T(n=>typeof n!="function"?n:function(o,g,A){let u=!1,d,a=new Promise(S=>{d=function(f){u=!0,S(f)}}),x;try{x=n(o,g,d)}catch(S){x=Promise.reject(S)}const c=x!==!0&&ae(x);if(x!==!0&&!c&&!u)return!1;const v=S=>{S.then(f=>{A(f)},f=>{let q;f&&(f instanceof Error||typeof f.message=="string")?q=f.message:q="An unexpected error occurred",A({__mozWebExtensionPolyfillReject__:!0,message:q})}).catch(f=>{console.error("Failed to send onMessage rejected reply",f)})};return v(c?x:a),!0}),le=({reject:n,resolve:i},o)=>{m.runtime.lastError?m.runtime.lastError.message===t?i():n(new Error(m.runtime.lastError.message)):o&&o.__mozWebExtensionPolyfillReject__?n(new Error(o.message)):i(o)},W=(n,i,o,...g)=>{if(g.length<i.minArgs)throw new Error(`Expected at least ${i.minArgs} ${N(i.minArgs)} for ${n}(), got ${g.length}`);if(g.length>i.maxArgs)throw new Error(`Expected at most ${i.maxArgs} ${N(i.maxArgs)} for ${n}(), got ${g.length}`);return new Promise((A,u)=>{const d=le.bind(null,{resolve:A,reject:u});g.push(d),o.sendMessage(...g)})},me={devtools:{network:{onRequestFinished:R(ge)}},runtime:{onMessage:R(D),onMessageExternal:R(D),sendMessage:W.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:W.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},L={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return b.privacy={network:{"*":L},services:{"*":L},websites:{"*":L}},F(m,me,b)};s.exports=l(chrome)}})})(C)),C.exports}var Q=X();const k=Y(Q);function P(r,...e){}const ee={debug:(...r)=>P(console.debug,...r),log:(...r)=>P(console.log,...r),warn:(...r)=>P(console.warn,...r),error:(...r)=>P(console.error,...r)},_=class _ extends Event{constructor(e,s){super(_.EVENT_NAME,{}),this.newUrl=e,this.oldUrl=s}};p(_,"EVENT_NAME",j("wxt:locationchange"));let $=_;function j(r){var e;return`${(e=k==null?void 0:k.runtime)==null?void 0:e.id}:content:${r}`}function re(r){let e,s;return{run(){e==null&&(s=new URL(location.href),e=r.setInterval(()=>{let t=new URL(location.href);t.href!==s.href&&(window.dispatchEvent(new $(t,s)),s=t)},1e3))}}}const E=class E{constructor(e,s){p(this,"isTopFrame",window.self===window.top);p(this,"abortController");p(this,"locationWatcher",re(this));p(this,"receivedMessageIds",new Set);this.contentScriptName=e,this.options=s,this.abortController=new AbortController,this.isTopFrame?(this.listenForNewerScripts({ignoreFirstEvent:!0}),this.stopOldScripts()):this.listenForNewerScripts()}get signal(){return this.abortController.signal}abort(e){return this.abortController.abort(e)}get isInvalid(){return k.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(e){return this.signal.addEventListener("abort",e),()=>this.signal.removeEventListener("abort",e)}block(){return new Promise(()=>{})}setInterval(e,s){const t=setInterval(()=>{this.isValid&&e()},s);return this.onInvalidated(()=>clearInterval(t)),t}setTimeout(e,s){const t=setTimeout(()=>{this.isValid&&e()},s);return this.onInvalidated(()=>clearTimeout(t)),t}requestAnimationFrame(e){const s=requestAnimationFrame((...t)=>{this.isValid&&e(...t)});return this.onInvalidated(()=>cancelAnimationFrame(s)),s}requestIdleCallback(e,s){const t=requestIdleCallback((...l)=>{this.signal.aborted||e(...l)},s);return this.onInvalidated(()=>cancelIdleCallback(t)),t}addEventListener(e,s,t,l){var m;s==="wxt:locationchange"&&this.isValid&&this.locationWatcher.run(),(m=e.addEventListener)==null||m.call(e,s.startsWith("wxt:")?j(s):s,t,{...l,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),ee.debug(`Content script "${this.contentScriptName}" context invalidated`)}stopOldScripts(){window.postMessage({type:E.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName,messageId:Math.random().toString(36).slice(2)},"*")}verifyScriptStartedEvent(e){var m,b,T;const s=((m=e.data)==null?void 0:m.type)===E.SCRIPT_STARTED_MESSAGE_TYPE,t=((b=e.data)==null?void 0:b.contentScriptName)===this.contentScriptName,l=!this.receivedMessageIds.has((T=e.data)==null?void 0:T.messageId);return s&&t&&l}listenForNewerScripts(e){let s=!0;const t=l=>{if(this.verifyScriptStartedEvent(l)){this.receivedMessageIds.add(l.data.messageId);const m=s;if(s=!1,m&&(e!=null&&e.ignoreFirstEvent))return;this.notifyInvalidated()}};addEventListener("message",t),this.onInvalidated(()=>removeEventListener("message",t))}};p(E,"SCRIPT_STARTED_MESSAGE_TYPE",j("wxt:content-script-started"));let K=E;const se=Symbol("null");let te=0;class ne extends Map{constructor(){super(),this._objectHashes=new WeakMap,this._symbolHashes=new Map,this._publicKeys=new Map;const[e]=arguments;if(e!=null){if(typeof e[Symbol.iterator]!="function")throw new TypeError(typeof e+" is not iterable (cannot read property Symbol(Symbol.iterator))");for(const[s,t]of e)this.set(s,t)}}_getPublicKeys(e,s=!1){if(!Array.isArray(e))throw new TypeError("The keys parameter must be an array");const t=this._getPrivateKey(e,s);let l;return t&&this._publicKeys.has(t)?l=this._publicKeys.get(t):s&&(l=[...e],this._publicKeys.set(t,l)),{privateKey:t,publicKey:l}}_getPrivateKey(e,s=!1){const t=[];for(let l of e){l===null&&(l=se);const m=typeof l=="object"||typeof l=="function"?"_objectHashes":typeof l=="symbol"?"_symbolHashes":!1;if(!m)t.push(l);else if(this[m].has(l))t.push(this[m].get(l));else if(s){const b=`@@mkm-ref-${te++}@@`;this[m].set(l,b),t.push(b)}else return!1}return JSON.stringify(t)}set(e,s){const{publicKey:t}=this._getPublicKeys(e,!0);return super.set(t,s)}get(e){const{publicKey:s}=this._getPublicKeys(e);return super.get(s)}has(e){const{publicKey:s}=this._getPublicKeys(e);return super.has(s)}delete(e){const{publicKey:s,privateKey:t}=this._getPublicKeys(e);return!!(s&&super.delete(s)&&this._publicKeys.delete(t))}clear(){super.clear(),this._symbolHashes.clear(),this._publicKeys.clear()}get[Symbol.toStringTag](){return"ManyKeysMap"}get size(){return super.size}}new ne;function de(){}function M(r,...e){}const ie={debug:(...r)=>M(console.debug,...r),log:(...r)=>M(console.log,...r),warn:(...r)=>M(console.warn,...r),error:(...r)=>M(console.error,...r)};return(async()=>{try{const{main:r,...e}=Z,s=new K("content",e);return await r(s)}catch(r){throw ie.error('The content script "content" crashed on startup!',r),r}})()})();
content;
