# ContextGit ビジョンドキュメント

> 最終更新: 2025-02-21
> 詳細な議論記録: `discussions/` ディレクトリ参照

---

## 1. ContextGitとは何か

**「AIチームのためのGitHub」**

複数の生成AIを、Gitモデルで管理・オーケストレーションするプラットフォーム。

> どのAIを使うか考えなくていい。コンテキストは全部繋がっていて、過去の成功体験から最適なAIとワークフローが自動選択される。でも自分で指定もできる。

各AIが「開発者」、ContextGitが「GitHub」の役割を果たす。ソフトウェア開発で解決済みの問題（並行作業、バージョン管理、レビュー、チーム協業）を、AI活用に転用する。

---

## 2. 解決する課題

| 課題 | 説明 |
|------|------|
| AI記憶の統合 | ChatGPT、Claude、Gemini等に散らばったコンテキストを一元管理 |
| 再説明の排除 | 新しいチャットを開くたびにゼロから説明し直す無駄をなくす。AIが自分を知っている状態 |
| 最適な答え | どのAIが最適かをユーザーが考えなくていい。タスクに応じた自動選択 |
| AIナレッジ管理 | うまくいったプロンプト、ワークフロー、回答を資産として蓄積・再利用 |

---

## 3. コアコンセプト：GitモデルのAIワークフロー適用

| Gitの概念 | AIワークフローへの対応 |
|-----------|----------------------|
| Branch / Worktree | 並列AI実行（複数AIが同時に別タスクを処理） |
| Commit | 各AIの出力をスナップショットとして保存 |
| Merge | 複数AIの結果を統合 |
| PR + Review | 統合結果のレビュー（別AIがレビューアになる） |
| Fork | 別バージョン・別アプローチの分岐 |
| Main branch | 最終成果物 |

---

## 4. アーキテクチャ：司令塔AI + ContextGit + Content Script

3層アーキテクチャ。「頭脳」「身体」「手足」の分離。

### 3層構造
```
┌─────────────────────────────────────────────────┐
│              司令塔AI（頭脳）                      │
│                                                   │
│  エンジニア: Claude Code + Claude in Chrome (MCP) │
│  非エンジニア: AI Web UIタブ（Claude.ai等）        │
│                                                   │
│  → タスク分析 / DAG構築 / プロンプト生成 / 結果評価 │
└──────────────────────┬──────────────────────────┘
                       │
┌──────────────────────▼──────────────────────────┐
│              ContextGit 拡張（身体）              │
│                                                   │
│  ┌───────────┐  ┌───────────┐  ┌───────────┐    │
│  │ Workspace  │  │ Task DAG  │  │ AI State  │    │
│  │   State    │  │ Definition│  │  Monitor  │    │
│  └───────────┘  └───────────┘  └───────────┘    │
│            Git版管理 / ワークフロー管理             │
└──────┬──────────────┬──────────────┬─────────────┘
       │              │              │
  ┌────▼────┐   ┌────▼────┐   ┌────▼────┐
  │CS:ChatGPT│  │CS:Claude │  │CS:Gemini │  ← 手足
  │ 監視     │  │ 監視     │  │ 監視     │
  │ 読み取り  │  │ 読み取り  │  │ 読み取り  │
  │ 入力     │  │ 入力     │  │ 入力     │
  └──────────┘  └──────────┘  └──────────┘
         送信: ユーザー手動 or 自動
```

### 司令塔AIの供給方式

| ターゲット | 方式 | 仕組み |
|-----------|------|--------|
| エンジニア | Claude Code + Claude in Chrome | MCP経由でContextGit拡張と連携 |
| 非エンジニア | AI Web UIタブを司令塔に指定 | Content Scriptが司令塔AIの応答を読み取り、指示として解釈 |

両方式でContextGit拡張とContent Scriptの実装は同一。「頭脳の供給元」だけが異なる。

### 動作フロー
1. 司令塔AIがタスクを分析し、DAGを構築
2. 各Content Scriptが `MutationObserver` で自分のAIページを常時監視
3. 司令塔AIがプロンプトを生成 → Content Script経由でAIに入力
4. AI応答完了を検知 → ContextGitに状態報告
5. 司令塔AIが結果を評価 → 次のDAGノードへ進む
6. 送信（モードにより自動/手動）

### オーケストレーション：レベル3+4ハイブリッド

**デフォルト（自動判断）:** タスク分析 → 自動でDAG構築 → 最適AI選択 → 実行 → 結果統合

**ユーザー指定:** サービス直接指定 / 過去の成功ワークフロー選択 / テンプレート適用

**学習:** 成功パターンを蓄積し、ルーティング精度が向上

### ユースケース例: パワポ作成
```
[1] Claude: スライド構成
      ├──→ [2] Gemini: 画像生成 ──→ [3] Claude: スライド作成 ─┐
      └──→ [4] ChatGPT: データ検索 → [5] 検証 → [6] Claude: 図表 ─┘→ [7] ChatGPT: レビュー
```

### ユースケース例: 調査レポート
3トピック × 3AI = 9並列タスク → 結果統合 → ギャップ分析 → 再検索 → レポート/パワポ/台本

---

## 5. プロダクト構造: 1プロダクト2モード

### モード定義

| | Public モード（デフォルト） | Power モード（opt-in） |
|---|---|---|
| **用途** | ハッカソン・就活・一般公開 | パワーユーザー・自分用 |
| プロンプト自動生成 | ○ | ○ |
| AI応答の監視・読み取り | ○ | ○ |
| コンテキストGit管理 | ○ | ○ |
| DAGワークフロー | ○ | ○ |
| プロンプト入力 | クリップボード＋通知 | 自動入力 |
| 送信 | **ユーザー自身** | **自動送信** |
| ToS | 完全クリーン | グレー（自己責任） |

核心技術は同一。違いは最後の「入力→送信」部分のみ。

### ターゲット別UI（将来）

エンジニア向けから先に作り、非エンジニア向けUIを後から被せる（Git→GitHubの関係）。

| | 非エンジニア | エンジニア |
|---|---|---|
| 欲しいもの | 「パワポ作って」で動く世界 | 複数AIを自在に操れる開発基盤 |
| Git | 見えない。裏で動いてる | 見える。自分で操作もできる |
| UI | シンプルなChrome拡張 | CLI / API / 拡張 |

---

## 6. 技術的手段

| レイヤー | 技術 | 役割 |
|----------|------|------|
| 頭脳（司令塔） | Claude in Chrome (MCP) / AI Web UIタブ | 知的判断・プロンプト生成 |
| 身体（状態管理） | Chrome拡張 + isomorphic-git + IndexedDB | Git版管理・DAG保持・ワークフロー |
| 手足（DOM操作） | Content Script + MutationObserver | 各AIページの監視・読み書き |

---

## 7. 差別化

| 競合 | ContextGitとの違い |
|------|-------------------|
| HARPA AI | マルチAI操作可能だがGit管理・DAGワークフローなし |
| LangChain / AutoGPT | APIのみ。UIベース操作不可 |
| Zapier / Make | AI特化ではない。Git的管理なし |
| Claude in Chrome単体 | 結果の管理・蓄積がない |
| CrewAI | API依存。ブラウザ操作レイヤーなし |
| Nanobrowser | マルチエージェントだがAI間協調・バージョン管理なし |

**独自ポジション:** Git的管理 + 司令塔AI による知的オーケストレーション + 動的DAG + 学習するルーティング

---

## 8. 未決事項

- エンジニア向けMVPの具体的スコープ
- Content Script双方向通信の詳細設計（読み取り + 書き込み）
- DAGスケジューラーの実装方針

---

## 決定ログ

| 日付 | 決定事項 | 理由 |
|------|---------|------|
| 2025-02-14 | AI間オーケストレーション構想の発案 | Claude in ChromeでWeb AIのUIを操作できる発見から着想 |
| 2025-02-17 | ContextGitの本質を「AIチームのためのGitHub」と定義 | ドリル/穴の比喩で目的を整理。GitモデルがAIワークフローに直接対応すると気づいた |
| 2025-02-17 | レベル3+4ハイブリッドオーケストレーション | 基本自動（L4）だがユーザー指定（L3）もできる。非エンジニアは自動、エンジニアはカスタマイズ |
| 2025-02-17 | 1プロダクト2モード | コア技術は同じ。表面のインターフェースだけ変える。リソース分散を避ける |
| 2025-02-17 | エンジニア向けから先に開発 | 自分が毎日使って磨く。ただし非エンジニアUIを後から載せられる設計にする |
| 2025-02-17 | プロダクト開発を優先（イベント出展より） | 中途半端になるリスクを避ける |
| 2025-02-17 | ドキュメント2層構造 | LLMが読むのはvision.md（最新+決定ログ）のみ。discussions/に詳細アーカイブ |
| 2025-02-21 | Coordinatorモデル検討→司令塔AIモデルに転換 | 当初P2P型を検討したが、CSだけでは知的なプロンプト構築ができない。司令塔AI（頭脳）+ ContextGit（身体）+ CS（手足）の3層に |
| 2025-02-21 | 司令塔AIの供給方式決定 | エンジニア: Claude Code + Claude in Chrome (MCP)。非エンジニア: AI Web UIタブ（Claude.ai等）を司令塔に指定。ContextGit本体は同一 |
| 2025-02-21 | Public/Powerの2モード確定 | Publicモード（手動送信、ToSクリーン、ハッカソン・就活向け）とPowerモード（自動送信、自分用）。核心技術は同一 |
| 2025-02-21 | 自動送信は実質問題なしと判断 | Chrome Web Storeに自動送信拡張が複数公開中（HARPA AI 500K+等）。ToS条項は存在するが執行されていない |
| 2025-02-21 | 競合分析完了 | HARPA AI、Nanobrowser、Bardeen、Fellou等を調査。Git管理+ブラウザDAGオーケストレーションの組み合わせは市場に存在しない |
